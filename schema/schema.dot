// Mail - just in DB as JSON
{
  name: 'signup',
  to: '$user,
  html: `
    Welcome! This is the shit.

    Are you ready? {{values.email}}
  `
}

// Form - just in DB as JSON
{
  action: 'user/create',
  fields: [
    {
      name: 'name',
      type: 'string',
      blank: true
    },
    {
      name: 'email'
    }
  ]
}

// Action
// action: 'user/create'
filters('setup', 'auth')
validate('values.name.minlength', 2)
validate('values.name.email', '$email')
allow('values.name', 'values.email')

set('values.user_id', $user.id)
set('values.password', $encrypt)

when('values.name.ne', 'vidar@eldoy', () => {
  set('values.published', true)
})

db('user/create') // Writes to $result
mail('signup')
keep('id') // Keep and remove only works on $result
// keep() removes all

// $result is returned
