# filters setup auth
filters {
  setup
  auth
}

validate {
  values.name.minlength 2
  values.name.email $email
}

allow {
  values.name
  values.email
}

set {
  values.user_id $user.id
  values.password $encrypt
}

when {
  values.name.eq vidar@eldoy
  set {
    values.published true
  }
}

# db user.create
db {
  path user.create
}

# mail signup
mail {
  name signup
}

# keep id
keep {
  id
}
